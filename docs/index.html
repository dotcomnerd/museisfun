<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Muse API - Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Muse API">
    <meta name="robots" content="noindex, nofollow">
    <meta name="theme-color" content="#a117f4">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="title" content="The Official Muse API Documentation">
    <meta name="description"
        content="Backend API documentation for Muse, a free, next-generation music streaming platform.">
    <meta name="keywords"
        content="free music, music, audio, streaming, platform, api, songs, playlists, users, muse, nyumat, github, api, documentation">
    <meta property="og:title" content="The Official Muse API Documentation">
    <meta property="og:site_name" content="Muse API Documentation">
    <meta property="og:url" content="https://docs.museisfun.com" />
    <meta property="og:description"
        content="Backend API documentation for Muse, a free, next-generation music streaming platform.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://docs.museisfun.com/assets/og.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Gill+Sans">
    <link rel="icon" href="https://docs.museisfun.com/assets/favicon.png" type="image/png">
    <style>
        :root {
            --bg-color: #f2f2f2;
            --text-color: #000;
            --accent-color: #a117f4;
            --border-radius: 12px;
            --border-width: 4px;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            margin: 0;
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        header,
        section {
            margin: 40px;
            padding: 20px;
            background: #fff;
            border: var(--border-width) solid var(--text-color);
            border-radius: var(--border-radius);
            box-shadow: 10px 10px 0px #000;
        }

        header {
            text-align: center;
        }

        h1,
        h2,
        h3 {
            margin: 0 0 20px 0;
        }

        p {
            line-height: 1.6;
        }

        nav {
            margin-top: 20px;
        }

        a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: normal;
            border-bottom: 2px solid var(--accent-color);
        }

        pre {
            background: #e0e0e0;
            padding: 15px;
            border: var(--border-width) solid var(--text-color);
            border-radius: var(--border-radius);
            box-shadow: 5px 5px 0px #000;
            overflow-x: auto;
        }

        code {
            font-family: monospace;
        }

        .button {
            display: inline-block;
            padding: 10px 20px;
            margin-top: 20px;
            background: var(--accent-color);
            color: #fff;
            border: var(--border-width) solid var(--text-color);
            border-radius: var(--border-radius);
            box-shadow: 5px 5px 0px #000;
        }

        .button:hover {
            background: #e64a19;
        }

        footer {
            text-align: center;
            margin: 40px;
            padding: 10px;
            background: #fff;
            border: var(--border-width) solid var(--text-color);
            border-radius: var(--border-radius);
            box-shadow: 5px 5px 0px #000;
        }

        .endpoint {
            margin: 20px 0;
            padding: 15px;
            background: #fff;
            border: 2px solid var(--text-color);
            border-radius: var(--border-radius);
        }

        .method {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: normal;
            margin-right: 10px;
        }

        .get {
            background: #61affe;
        }

        .post {
            background: #49cc90;
        }

        .put {
            background: #a117f4;
        }

        .delete {
            background: #f93e3e;
        }

        .patch {
            background: #fca130;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th,
        td {
            padding: 10px;
            border: 2px solid var(--text-color);
            text-align: left;
        }

        th {
            background: #e0e0e0;
        }

        .github-corner {
            position: absolute;
            top: 0;
            right: 0;
        }

        .response-example {
            margin-top: 10px;
            border-left: 4px solid var(--accent-color);
            padding-left: 15px;
        }

        .scroll-top {
            display: none;
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 15px;
            background: var(--accent-color);
            color: white;
            border: var(--border-width) solid var(--text-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            box-shadow: 5px 5px 0px #000;
            transition: transform 0.2s;
            z-index: 1000;
            font-weight: normal;
            font-family: 'Gill Sans', sans-serif;
        }

        .scroll-top:hover {
            transform: translateY(-2px);
        }

        .scroll-top:active {
            transform: translate(2px, 2px);
            box-shadow: 3px 3px 0px #000;
        }
    </style>
</head>

<body>
    <a href="https://github.com/nyumat/muse" class="github-corner" aria-label="View source on GitHub">
        <svg width="80" height="80" viewBox="0 0 250 250"
            style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
            <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
            <path
                d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
                fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
            <path
                d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
                fill="currentColor" class="octo-body"></path>
        </svg>
    </a>

    <header>
        <h1>Muse API Documentation</h1>
        <p>Complete API specification for the Muse music streaming platform</p>
        Written with ðŸŽ§ by <a href="https://github.com/nyumat">@nyumat</a>
        <nav>
            <a href="https://museisfun.com">Platform</a> |
            <a href="https://api.museisfun.com">API</a>  |
            <a href="#authentication">Authentication</a>
            <br/>
            <a href="#songs">Songs</a> |
            <a href="#playlists">Playlists</a> |
            <a href="#users">Users</a> |
            <a href="#errors">Errors</a>
        </nav>
    </header>

    <section id="authentication">
        <h2>Authentication</h2>
        <p>Most of the Muse API uses JWT tokens for authentication. To authorize your client, include a token in the
            Authorization header:</p>
        <pre><code>Authorization: Bearer &lt;your_jwt_token&gt;</code></pre>

        <div class="endpoint">
            <span class="method post">POST</span>
            <code>/auth/register</code>
            <p>Register a new user account.</p>
            <pre><code>// Request Body
{
    "email": "string",
    "password": "string",
    "name": "string",
    "username": "string"
}

// Response Example
{
    "message": "User created successfully",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}</code></pre>
        </div>

        <div class="endpoint">
            <span class="method post">POST</span>
            <code>/auth/login</code>
            <p>Authenticate a user and receive a JWT token.</p>
            <pre><code>// Request Body
{
    "username": "string",
    "password": "string"
}

// Response Example
{
    "message": "Login successful",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}</code></pre>
        </div>
    </section>

    <section id="songs">
        <h2>Songs</h2>

        <div class="endpoint">
            <span class="method get">GET</span>
            <code>/api/songs</code>
            <p>Retrieve all songs for the authenticated user.</p>
            <pre><code>// Response Example
[{
    "_id": "65fb1234c8e123456789abcd",
    "title": "Never Gonna Give You Up",
    "duration": 213,
    "mediaUrl": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
    "r2Key": "songs/7fc913eb8c07b8e144ea62fc33e4c03e.mp3",
    "createdBy": "65fb1234c8e123456789abce",
    "upload_date": "1711321213",
    "view_count": 1234567890,
    "thumbnail": "https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg",
    "tags": ["pop", "80s"],
    "original_url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
    "stream_url": "https://muse-songs.r2.cloudflarestorage.com/songs/...",
    "extractor": "youtube",
    "duration_string": "3:33",
    "ytdlp_id": "dQw4w9WgXcQ",
    "uploader": "Rick Astley",
    "listeningTime": 1800,
    "createdAt": "2024-03-20T12:00:00.000Z",
    "updatedAt": "2024-03-20T12:00:00.000Z"
}]</code></pre>
        </div>

        <div class="endpoint">
            <span class="method post">POST</span>
            <code>/api/songs</code>
            <p>Upload a new song from a supported platform (YouTube, SoundCloud).</p>
            <pre><code>// Request Body
{
    "mediaUrl": "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
}

// Response Example
{
    "message": "Song uploaded successfully",
    "songId": "65fb1234c8e123456789abcd"
}</code></pre>
        </div>

        <div class="endpoint">
            <span class="method patch">PATCH</span>
            <code>/api/songs/:id</code>
            <p>Update a song's metadata. Only title, duration_string, and uploader fields can be modified (for now).</p>
            <pre><code>// Request Body
{
    "title": "Updated Song Title",
    "duration_string": "4:20",
    "uploader": "New Artist Name"
}

// Response Example
{
    "_id": "65fb1234c8e123456789abcd",
    "title": "Updated Song Title",
    "duration_string": "4:20",
    "uploader": "New Artist Name",
    "updatedAt": "2024-03-20T12:00:00.000Z"
}</code></pre>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span>
            <code>/api/songs/:id/stream</code>
            <p>Get a temporary streaming URL for a song.</p>
            <pre><code>// Response Example
{
    "url": "https://muse-songs.r2.cloudflarestorage.com/songs/7fc913eb8c07b8e144ea62fc33e4c03e.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=..."
}</code></pre>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span>
            <code>/api/songs/:type</code>
            <p>Get songs by platform type (youtube, soundcloud).</p>
            <pre><code>// Response Example
[{
    "_id": "65fb1234c8e123456789abcd",
    "title": "Never Gonna Give You Up",
    "duration": 213,
    "thumbnail": "https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg",
    "stream_url": "https://muse-songs.r2.cloudflarestorage.com/songs/...",
    "uploader": "Rick Astley",
    "listeningTime": 1800
}]</code></pre>
        </div>

        <div class="endpoint">
            <span class="method post">POST</span>
            <code>/api/songs/:id/listen</code>
            <p>Update listening time for a song.</p>
            <pre><code>// Request Body
{
    "time": 300  // 5 minutes in seconds
}

// Response Example
{
    "message": "Listening time updated"
}</code></pre>
        </div>


        <div class="endpoint">
            <span class="method delete">DELETE</span>
            <code>/api/songs/:id</code>
            <p>Delete a song by ID.</p>
            <pre><code>// Response Example
{
    "message": "Song deleted successfully"
}

// Error Response Example
{
    "error": "Song not found"
}</code></pre>
        </div>
    </section>

    <section id="playlists">
        <h2>Playlists</h2>

        <div class="endpoint">
            <span class="method get">GET</span>
            <code>/api/playlists</code>
            <p>Get all playlists for the authenticated user.</p>
            <pre><code>// Response Example
[{
    "_id": "65fb1234c8e123456789abcd",
    "name": "80s Hits",
    "description": "Best songs from the 80s",
    "coverImage": "https://muse-covers.r2.cloudflarestorage.com/covers/...",
    "visibility": "public",
    "createdBy": {
        "_id": "65fb1234c8e123456789abce",
        "username": "musiclover"
    },
    "songs": [{
        "_id": "65fb1234c8e123456789abcd",
        "title": "Never Gonna Give You Up",
        "duration": 213,
        "thumbnail": "https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg",
        "stream_url": "https://muse-songs.r2.cloudflarestorage.com/songs/..."
    }],
    "playCount": 42,
    "createdAt": "2024-03-20T12:00:00.000Z",
    "updatedAt": "2024-03-20T12:00:00.000Z"
}]</code></pre>
        </div>
        <div class="endpoint">
            <span class="method get">GET</span>
            <code>/api/playlists/:id</code>
            <p>Get a specific playlist.</p>
            <pre><code>// Response Example
{
    "_id": "65fb1234c8e123456789abcd",
    "name": "80s Hits",
    "description": "Best songs from the 80s",
    "coverImage": "https://muse-covers.r2.cloudflarestorage.com/covers/abc123.jpg",
    "visibility": "public",
    "createdBy": {
        "_id": "65fb1234c8e123456789abce",
        "username": "musiclover"
    },
    "songs": [{
        "_id": "65fb1234c8e123456789abcd",
        "title": "Never Gonna Give You Up",
        "duration": 213,
        "thumbnail": "https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg",
        "stream_url": "https://muse-songs.r2.cloudflarestorage.com/songs/..."
    }],
    "playCount": 42,
    "createdAt": "2024-03-20T12:00:00.000Z",
    "updatedAt": "2024-03-20T12:00:00.000Z"
}</code></pre>
        </div>

        <div class="endpoint">
            <span class="method put">PUT</span>
            <code>/api/playlists/:id</code>
            <p>Update a playlist.</p>
            <pre><code>// Request Body (multipart/form-data)
{
    "name": "90s Hits",
    "description": "Best songs from the 90s",
    "isPublic": true,
    "cover": File  // Optional
}

// Response Example
{
    "_id": "65fb1234c8e123456789abcd",
    "name": "90s Hits",
    "description": "Best songs from the 90s",
    "coverImage": "https://muse-covers.r2.cloudflarestorage.com/covers/xyz789.jpg",
    "visibility": "public",
    "createdBy": {
        "_id": "65fb1234c8e123456789abce",
        "username": "musiclover"
    },
    "songs": [...],
    "playCount": 42,
    "updatedAt": "2024-03-20T12:30:00.000Z"
}</code></pre>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span>
            <code>/api/playlists/:userId/most-played</code>
            <p>Get user's most played playlists.</p>
            <pre><code>// Response Example
[{
    "_id": "65fb1234c8e123456789abcd",
    "name": "80s Hits",
    "description": "Best songs from the 80s",
    "coverImage": "https://muse-covers.r2.cloudflarestorage.com/covers/abc123.jpg",
    "playCount": 150,
    "songs": [{
        "_id": "65fb1234c8e123456789abcd",
        "title": "Never Gonna Give You Up",
        "stream_url": "https://muse-songs.r2.cloudflarestorage.com/songs/..."
    }]
}]</code></pre>
        </div>

        <div class="endpoint">
            <span class="method post">POST</span>
            <code>/api/playlists/:id/songs</code>
            <p>Add a song to a playlist.</p>
            <pre><code>// Request Body
{
    "songId": "65fb1234c8e123456789abcd"
}

// Response Example
{
    "_id": "65fb1234c8e123456789abcd",
    "name": "80s Hits",
    "songs": [{
        "_id": "65fb1234c8e123456789abcd",
        "title": "Never Gonna Give You Up",
        "stream_url": "https://muse-songs.r2.cloudflarestorage.com/songs/..."
    }],
    "updatedAt": "2024-03-20T12:30:00.000Z"
}</code></pre>
        </div>



        <div class="endpoint">
            <span class="method delete">DELETE</span>
            <code>/api/playlists/:id/songs/:songId</code>
            <p>Remove a song from a playlist.</p>
            <pre><code>// Response Example
{
    "_id": "65fb1234c8e123456789abcd",
    "name": "My Playlist",
    "songs": [
        // Array of remaining songs after removal
    ],
    "updatedAt": "2024-03-20T12:30:00.000Z"
}</code></pre>
        </div>

        <div class="endpoint">
            <span class="method delete">DELETE</span>
            <code>/api/playlists/:id</code>
            <p>Delete a playlist. This will also delete the playlist's cover image if it exists.</p>
            <pre><code>// Response
204 No Content</code></pre>
    </section>

    <section id="users">
        <h2>Users</h2>

        <div class="endpoint">
            <span class="method get">GET</span>
            <code>/users</code>
            <p>Get all users (excluding passwords).</p>
            <pre><code>// Response Example
    [{
        "_id": "65fb1234c8e123456789abce",
        "username": "musiclover",
        "email": "user@example.com",
        "name": "Music Lover",
        "pfp": "https://muse-pfp.r2.cloudflarestorage.com/pfp/abc123.jpg",
        "bio": "I love music!",
        "songs": [{
            "_id": "65fb1234c8e123456789abcd",
            "title": "Never Gonna Give You Up"
        }],
        "createdAt": "2024-03-20T12:00:00.000Z"
    }]</code></pre>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span>
            <code>/users/data/stats</code>
            <p>Get user statistics.</p>
            <pre><code>// Response Example
    {
        "totalDownloads": 42,
        "storageUsed": "128.45",  // in MB
        "totalPlaylists": 5,
        "totalListeningTime": "24.5"  // in hours
    }</code></pre>
        </div>

        <div class="endpoint">
            <span class="method put">PUT</span>
            <code>/auth/update</code>
            <p>Update user profile.</p>
            <pre><code>// Request Body (multipart/form-data)
    {
        "username": "newusername",
        "email": "newemail@example.com",
        "name": "New Name",
        "bio": "New bio",
        "password": "newpassword",
        "pfp": File  // Optional profile picture
    }

    // Response Example
    {
        "updatedUser": {
            "_id": "65fb1234c8e123456789abce",
            "username": "newusername",
            "email": "newemail@example.com",
            "name": "New Name",
            "pfp": "https://muse-pfp.r2.cloudflarestorage.com/pfp/xyz789.jpg",
            "bio": "New bio",
            "updatedAt": "2024-03-20T12:30:00.000Z"
        },
        "newToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
    }</code></pre>
        </div>

        <div class="endpoint">
            <span class="method post">POST</span>
            <code>/users/media/favorite/:type</code>
            <p>Mark a song or playlist as favorite.</p>
            <pre><code>// Request Body
{
"itemId": "65fb1234c8e123456789abcd"
}

// Response Example
{
"message": "Playlist favorited successfully!"  // or "Song favorited successfully!"
}</code></pre>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span>
            <code>/users/media/favorite/:type</code>
            <p>Get user's favorite songs or playlists.</p>
            <pre><code>// Response Example
    {
        "favoritePlaylists": [{
            "_id": "65fb1234c8e123456789abcd",
            "name": "80s Hits",
            "description": "Best songs from the 80s",
            "coverImage": "https://muse-covers.r2.cloudflarestorage.com/covers/abc123.jpg",
            "visibility": "public",
            "createdBy": {
                "_id": "65fb1234c8e123456789abce",
                "username": "musiclover"
            },
            "songs": [{
                "_id": "65fb1234c8e123456789abcd",
                "title": "Never Gonna Give You Up",
                "duration": 213,
                "thumbnail": "https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg",
                "stream_url": "https://muse-songs.r2.cloudflarestorage.com/songs/..."
            }],
            "playCount": 42,
            "createdAt": "2024-03-20T12:00:00.000Z",
            "updatedAt": "2024-03-20T12:00:00.000Z"
        }],
        "favoriteSongs": [{
            "_id": "65fb1234c8e123456789abcd",
            "title": "Never Gonna Give You Up",
            "duration": 213,
            "thumbnail": "https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg",
            "stream_url": "https://muse-songs.r2.cloudflarestorage.com/songs/...",
            "uploader": "Rick Astley",
            "listeningTime": 1800
        }]
    }</code></pre>
        </div>

        <div class="endpoint">
            <span class="method delete">DELETE</span>
            <code>/users/:id</code>
            <p>Delete a user account by ID.</p>
            <pre><code>// Response Example (Success)
{
    "message": "User deleted successfully"
}

// Response Example (Not Found)
{
    "message": "User not found"
}

// Response Example (Invalid Input)
{
    "message": "Invalid input"
}

// Response Example (Server Error)
{
    "message": "Internal server error",
    "error": {...}
}</code></pre>
        </div>
    </section>

    <section id="errors">
        <h2>Error Responses</h2>
        <table>
            <tr>
                <th>Status Code</th>
                <th>Description</th>
                <th>Example</th>
            </tr>
            <tr>
                <td>400</td>
                <td>Bad Request - Invalid input parameters</td>
                <td><code>{"error": "Email and password are required."}</code></td>
            </tr>
            <tr>
                <td>401</td>
                <td>Unauthorized - Missing or invalid authentication token</td>
                <td><code>{"error": "Invalid or expired token."}</code></td>
            </tr>
            <tr>
                <td>403</td>
                <td>Forbidden - Not permitted to perform the action</td>
                <td><code>{"error": "Access denied"}</code></td>
            </tr>
            <tr>
                <td>404</td>
                <td>Not Found - Resource doesn't exist</td>
                <td><code>{"error": "Song not found"}</code></td>
            </tr>
            <tr>
                <td>500</td>
                <td>Internal Server Error - Server-side error occurred</td>
                <td><code>{"error": "Failed to connect to database"}</code></td>
            </tr>
        </table>
    </section>

    <button id="scrollTopButton" class="scroll-top">
        Scroll to Top
    </button>


    <footer>
        <p>
            <a href="https://github.com/nyumat/muse">View on GitHub</a>
        </p>
    </footer>

    <script src="/scroll.js"></script>
</body>

</html>
